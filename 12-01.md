# Домашнее задание к занятию «Базы данных»

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---
### Легенда

Заказчик передал вам [файл в формате Excel](https://github.com/netology-code/sdb-homeworks/blob/main/resources/hw-12-1.xlsx), в котором сформирован отчёт. 

На основе этого отчёта нужно выполнить следующие задания.

### Задание 1

Опишите не менее семи таблиц, из которых состоит база данных:

- какие данные хранятся в этих таблицах;
- какой тип данных у столбцов в этих таблицах, если данные хранятся в PostgreSQL.

Приведите решение к следующему виду:

Сотрудники (

- идентификатор, первичный ключ, serial,
- фамилия varchar(50),
- ...
- идентификатор структурного подразделения, внешний ключ, integer).

### Решение

На основании данных, предоставленных в файле, можно создать 7 таблиц.

# Схема БД

## Таблицы

### Employees
- `id` (primary key, SERIAL)
- `full_name` (VARCHAR(255))
- `salary` (NUMERIC)
- `position_id` (foreign key, INTEGER)
- `department_id` (foreign key, INTEGER)
- `hire_date` (DATE)
- `branch_id` (foreign key, INTEGER)

### Positions
- `id` (primary key, SERIAL)
- `title` (VARCHAR(255))

### Departments
- `id` (primary key, SERIAL)
- `name` (VARCHAR(255))
- `department_type_id` (foreign key, INTEGER)

### Department_Types
- `id` (primary key, SERIAL)
- `type_name` (VARCHAR(255))

### Branches
- `id` (primary key, SERIAL)
- `address` (VARCHAR(255))

### Projects
- `id` (primary key, SERIAL)
- `project_name` (VARCHAR(255))

### Project_Assignments
- `employee_id` (foreign key, INTEGER)
- `project_id` (foreign key, INTEGER)
- `start_date` (DATE)
- `end_date` (DATE, NULLABLE)

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.


### Задание 2*

Перечислите, какие, на ваш взгляд, в этой денормализованной таблице встречаются функциональные зависимости и какие правила вывода нужно применить, чтобы нормализовать данные.

## Решение

### Функциональные зависимости

1. Сотрудник и его атрибуты: `full_name` → `salary`, `position_id`, `department_id`, `hire_date`, `branch_id`, `project_id`. ФИО сотрудника определяет его оклад, должность, подразделение, дату найма, филиал и проекты.

2. Должность и тип подразделения: `position_id` → `department_type_id`. Должность связана с типом подразделения, где она применима.

3. Структурное подразделение и адрес филиала: `department_id` → `branch_address`. Каждое структурное подразделение находится в определенном филиале, адрес которого уникален.

4. Сотрудник и проекты: `employee_id` ↔ `project_id`. Один сотрудник может быть назначен на несколько проектов, и в одном проекте может участвовать несколько сотрудников.

### Первая нормальная форма (1NF)

- Устранение повторяющихся групп: данные должны быть представлены таблицей, в которой каждая колонка содержит уникальные данные.
  - **Employees** (`id`, `full_name`, `hire_date`, `salary`, `position_id`, `department_id`, `branch_id`)
  - **Positions** (`id`, `title`)
  - **Departments** (`id`, `name`, `department_type_id`)
  - **Department_Types** (`id`, `type_name`)
  - **Branches** (`id`, `address`)
  - **Projects** (`id`, `project_name`)

### Вторая нормальная форма (2NF)

- Удаление частичных зависимостей: все колонки таблицы должны зависеть от первичного ключа.
  - Из **Employees** вынести `position_id` и `department_id` в отдельные таблицы, если они формируют составной ключ.

### Третья нормальная форма (3NF)

- Удаление транзитивных зависимостей: атрибуты не должны зависеть от других неключевых атрибутов.
  - **Project_Assignments** (`employee_id`, `project_id`, `start_date`, `end_date`) - отдельная таблица для назначений сотрудников на проекты, удаляя транзитивную зависимость через сотрудника.

После применения этих правил, данные будут нормализованы и это точно облегчит их управление и поддержку целостности.
